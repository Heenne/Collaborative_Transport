<launch>
    <include file="$(find transport_launcher)/launch/virtual_master.launch">
        <arg name="use_ps4_cmd_vel"  value="false"/>
        <arg name="use_planner_cmd_vel"  value="true"/>
    </include>
    <node name="transport_state_machine" type="transport_state_machine_node.py" pkg="transport_controller" output="screen">
        <rosparam command="load" file="$(find transport_launcher)/config/system_settings.yaml"/>
    </node>

    <!-- Watchdogs for forces to avoid damage -->
    <node name="force_watchdog" type="force_watchdog.py" pkg="watchdogs" output="screen" ns="miranda">
        <remap from="watch_topic" to="panda/franka_state_controller/F_ext"/>
        <rosparam command="load" file="$(find transport_launcher)/config/watchdog.yaml"/>
    </node>
    <node name="force_watchdog" type="force_watchdog.py" pkg="watchdogs" output="screen" ns="murianda">
        <remap from="watch_topic" to="panda/franka_state_controller/F_ext"/>
        <rosparam command="load" file="$(find transport_launcher)/config/watchdog.yaml"/>
    </node>
    
    <node type="rviz" name="rviz" pkg="rviz" args="-d $(find transport_launcher)/rviz/multimirvirtual.rviz" />
</launch>